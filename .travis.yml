language: python
python:
  - '3.8'
services:
  - docker
branches:
  only:
    - master
    - devops
env:
  global:
  - secure: viBXfvpoZQzQ32xdoKHwNUs4Mi0FFTVOgahbPHo4ne7JS2RUdy+q70eN7b8opeWCuoEJWvJ4oZ7jeFkFnL5//LK5zv4pLYCM/kX3ZybRYYpuqyjMpxVMTZi8lwVx/SdEQZYYD8crB9dmT0SY0pSOEK77hkL9xBN35lxybbtIk8rcWn3ukhZyXipXIWuQOKjj9a5okr0BweldkoHzlcNdzla+JvMtE3Ygpf0mbRqj9dZAnQPMiTAgUhSEi9OQz9cgFgjUalvXJ0UhtZB6OuHcI6/5iSz47pPbzl/MXUuBr4H3TI399OQ/T7Wx4MtKVYC3r1Jpy/CQbd7qygN581Qk5ZYIRwRPGLPFRQX9oytDgS8Wus1MqbRKl1Ji33aD3reC62wZlbLBxGJ2sbAo5VlgdiXJqvCKL/XiU8Drxbbf2aYzPOl2YP2TVq3/RLHJpM/wXeC7MaWKLpSB2irurFXW/xuZBl2gsfBmEIgvE/KBIcFtI0gUOHXypUslpylVkFdxJX927h7ksj052LRcDKMosGnMuufA4My9a7X6zP4QgjJ2TZ3u9iY4V2Axd42l9rde/yZKhzASrOaT/EnsWIwV8mo+nl6wbStottdvbHlUVgWPFRfsNHKLZjaleiA7ejmm3kJlTr2T5EyI7BP2p/QHLTBD3yRnmSbF5lSY5Q7X5h0=
  - secure: iAU2/U2FBwHv7eJhpkkb6hlIm3esf+nIqNptnN/fOFqfU/WQurM8PvhcsQumlVubtpgMhTzfgqNXmubzEkahvanGQFwaXo9dDGjuo+05j+HkjodTXv3zqAxsqEDJ4gTj6CmF/htErx1qDkDTV8pO5fwTe7vkvenczr3DXAqGL/LnXKavp8zEenlY+vTdBmpHrJDSDR9EQzHXoRn6kekAtraBU13eAKk6KQQgvMrGz+BKj4A7JSKaITV6Vlt/i2G38bg18O/VEd1nIbAnZahzltC3CdcmLFoMWX35gZAel5zVwEdIG5S1jiB+9HnbSPhq/BJ8wjQ+krQJCLJrTOodzcbQFPy074Ebga/gWlnubWGCk2lHlrIUoBztMWYAzYTWtrai2/Rx2mYosCbVhwqhllivN7uXys+zs4CEThaOB+rCMV1GNdE7dMJBwh41ZU2BUzZ7fYm9v9kCY3wxPcDCeil7LlVMgebbTgsTxkWi/Y1xnDKZQ8LBgJ9ZJkD4W2IUHWahS+da32G/ukf05v3Q1+VewsjbOprdMUSCgglBacxmhdVizi9EZm1RYgMrMmbpzBGv9W/pphmuG1sb2fClXQ03+0LpBxaAXVM2D31n4vwiBIpfKbki9+8I1IVw51QAigLTTyeMrwEHuyXnDbfDZecwEWXGjZcpiZoyaS6JTGE=
  - secure: ZVLMIUVjk68vE6O128N44620I1nSgTGKlj8JB8PpPMOIAxY69LYacEtrQxSY+avpue/FdOuBUMkKzIPGlUxWdOjRMnPOsLUyToz7lQwr45RejffhTJNRU9awg4dq4BJJ6NeR6MO19xyV1WGRBx3sLMRgEMDXnkwTfgta/7UUjO8BQmBYSpHTqj+fes7XiJH+Fr1KQTUc19gNgoJbnj0O3T0NfNFUvjJ4tMNPdsxE9z86mukUVHMKQu46XU1L1pQehGBKgBUw1mvO7uP38IFAZTFKk9VWytCNXDtT6oS1Roc2PEBakYT5yXz1QC9d6KHEVhfhesuoo6YtGO45+tSyCHc+5K0qoAnMlmTLL02kpw+I9YZD07c3LVnScz4wSYC/6ZCAg2e+hXsomEd86G+E1xrcFVQtexmwWaXa4CQDDYA1Aa+ugg2iU1pIkbHdgyUM7KavCavE1lx1kUTXMgW6sAYWAjcld3wkWzZZ3gIEtjG+evhe8OfcAGd3GHzuG6DzVQcUgqEwQzQ4pBUMA3wk1XbjlkEMBkou/DrrHDxqkIwEsII+NVaoVRi7MDDh+S4bF7WyRvTqRB9Ut0e/+FDjb4CjVEUGJKU/IMJRmHbQyAuskx1cnU1cufiuWEB+ZRrQv819d5S6Wfg8y1PAJ6SwdnoRnEePxWn/M8Gooa8To7U=
  - secure: ni27gBT9Z83RIsN9jJ45Qnnjr2JBcHkXDp2eD09vATmK/Gj1ZoK7l/cIo1rwytD3WbRzFyExYVddhLxDhFjtTrSuWbN586iL8Y2Vtw5S79wuj5AnvnjcWsn2GjyZSwhQnUKDpXJL5l6QapssRRPUoIzAQpDBVykIbWlW8sgCQFgltS7w52/FiNAzNDgCdM/m+QUhljjQQN5p6fGCB87YOzIl9bZBIqYqglBmCi17OFo1LQOyLz/euybOMwnt4/bzeqQbPY/ec+Qz+HdL3kZ6hCUYJy5qOZm6GKN3e2soBoCM2bxd77FMk3wgk+yowXa6nQwDfTkdQ0TonGvS4inO3qA9tv4+3lE6Dc+rBpy3AqxYkiGbOZaZH0g/eZnvIaaWfpl640LJZhu/Bb9lGfM7pp3wVndZE7WxIpnUava8V/BeHrGzpfLxSYXaCrGNMLqzuC//XNGZJwJ2FzYaNBHU/yjSCtM+9eOivRLBJC8VTaFGjKoGLxeNEhYM/IixRMBufAj82H1J83jwfRg3FsTzhLeCnQZvhkV2jn3UXJJ+VSi2ebvhcLYrA+x0sJlODdUnIpZjgK3kxczb8CmaKORYaxH8MSETMdX+v86n5Y3WMZwHTHbWF1M2aurZvWWL/JEOTzbVjI+riezaRxpK48dTka+k6t6YcAFwBkiIMqhnnRs=

before_install:
  - pip install awscli
  - export PATH=$PATH:$HOME/.local/bin
  - aws configure set region us-east-1
  - docker login --username $DOCKER_HUB_USER --password $DOCKER_HUB_PASS
install:
  - docker build -t nickparisi/howiebot .
before_script:
  - docker push nickparisi/howiebot
script:
  - aws ecs update-service --cluster HowieCluster --service HowieBot-service --force-new-deployment